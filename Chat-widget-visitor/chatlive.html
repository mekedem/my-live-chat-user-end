<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Chat live</title>
  <script src="./js/socket.io.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/emoji-button@latest/dist/index.min.js"></script>
  <link rel="stylesheet" href="app.css">
</head>

<body>
  <div id="chat-container" class="chat-container">
    <div class="chat-main">
      <div class="chat-header">
        <img id="avatar_img" src="avatar.png" alt="Avatar" class="avatar">
        <div id="agentName" class="group-name">
          <span id="agent_Name">Hi there</span>
          <span id="onoffindicatoroff">o</span>
        </div>
        <div>
          <div class="widgetdropdown" style="float:right;">
            <img id="widgetdropbtn" class="widgetdropbtn" src="./more_vert_white.png"/>
            <div id="widgetdropdown-content" class="widgetdropdown-content">
              <div id="notification" class="widgetdropdown-item">
                <span id="enabledisable">Notification on</span>
              </div>
              <div id="rating" class="widgetdropdown-item">
                <span id="rating-text">Rate converstation</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="chatMessages" class="chat-messages">
      </div>
      <div class="chat-footer">
        <form id="messageSendForm">
          <span id="triggerpickerbtn">&#128578;</span>
          <input id="messageInput" type="text" placeholder="Type message here...">
        </form>
      </div>
    </div>
  </div>
  <div id="widgetcontainerbox">
    <div id="customwidget">
      <img id="widgetimageicon" src="smsinactiveicon.png"/>
      <span id="notificationbadge"> 2 </span> 
    </div>
  </div>
  <script src="./js/constants.js"></script>
  <script>
    let messageInput = document.querySelector("#messageInput");
    let triggerbutton = document.querySelector("#triggerpickerbtn");
    const picker = new EmojiButton({ position: 'auto',});
    picker.on('emoji', function(emoji){ messageInput.value += emoji; });
    triggerbutton.addEventListener('click', function(){ picker.pickerVisible ? picker.hidePicker() : picker.showPicker(messageInput); });
  </script>
  <script>
      window.addEventListener("DOMContentLoaded", () => {
      let notified = JSON.parse(localStorage.getItem("NotificationEnabled"));
      let enabledisabletext = document.querySelector("#enabledisable");
      if(notified){ enabledisabletext.textContent = "Notification off" }
      else{ enabledisabletext.textContent = "Notification on" }
      new Visitor("telegram"); 
    });
  </script>
  <script src="./js/handlers/visitorClass.js"></script>
</body>

</html>